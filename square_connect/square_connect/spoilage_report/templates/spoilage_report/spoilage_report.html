{% extends "app/layout.html" %}

{% block content %}


<script>
    $( document ).ready(function() {
        $.noConflict();
        $( "#datepicker" ).datepicker({});
    });
</script>

<div class="jumbotron">
    <h1>Spoilage Reports</h1>
    <form role="form" class="form-horizontal" method="post">
        {% csrf_token %}
        <table class="table">
            <tr>
                <th>
                    <select name="service">
                        <option value="mug">MUG</option>
                        <option value="vittles">Vital Vittles</option>
                        <option value="snaxa">Hoya Snaxa</option>
                        <option value="ug">Uncommon Grounds</option>
                        <option value="midnight">Midnight Mug</option>
                        <option value="storage">Storage</option>
                        <option value="catering">Catering</option>
                        <option value="hilltoss">Hilltoss</option>
                    </select>
                </th>
                <th>
                    <p>Date: <input name="date" type="text" id="datepicker"></p>
                </th>
                <th>
                    <button type="submit" class="btn btn-default">Retrieve report</button>
                </th>
            </tr>
        </table>
    </form>
    <h3>Search Results:</h3>
    <div class="table-responsive">
        <table class="table">
            <tr>
                <th>Item</th>
                <th>Variant</th>
                <th>SKU</th>
                <th>Price</th>
                <th>Quantity</th>
                <th>Transaction ID</th>
                <th>Time</th>
            </tr>
            {% for item in report.get_associated_items %}
                <tr>
                    <td>{{ item.name }}</td>
                    <td>{{ item.variant }}</td>
                    <td>{{ item.sku }}</td>
                    <td>{{ item.price }}</td>
                    <td>{{ item.quantity }}</td>
                    <td><a href="https://squareup.com/receipt/preview/{{ item.transaction_id }}" target="_blank">View receipt</a></td>
                    <td>{{ item.transaction_time }}</td>
                </tr>
            {% endfor %}
            <tr>
                <td/>
                <td/>
                <th>Total:</th>
                <td>{{ report.get_total }}</td>
                <td/>
                <td/>
                <td/>
            </tr>
        </table>
    </div>
    <!--
    <form role="form" class="form-horizontal" method="post">
        {% csrf_token %}
        <div class="form-group">
            <center>
                Send Spoilage Report to Accounting<br />
                <button type="submit" class="btn btn-default">Send</button>
            </center>
        </div>
        <input type="hidden" name="send" value="yes" />
    </form-->
</div>

{% endblock %}
